# でんしゃプログラミング - アプリ仕様書

## 概要
3歳児向けのプログラミング入門アプリ。電車に指示を与えてマップ上の目的地を目指す教育的ゲーム。

## ターゲットユーザー
- **主要対象**: 3歳〜5歳の子供
- **操作方法**: タッチ操作（大きなボタン）
- **プラットフォーム**: モバイル・タブレット対応

## コア機能

### 1. 指示ブロック（コマンド）
子供が電車に与えられる指示：

| 指示 | 動作 | アイコン案 |
|------|------|-----------|
| すすむ | 前に1マス進む | ⬆️ |
| ひだり回転 | その場で左に90度回転 | ↩️ |
| みぎ回転 | その場で右に90度回転 | ↪️ |
| クラクション | 音を鳴らす（移動なし） | 🔊 |
| ライト | ライトを点灯（移動なし） | 💡 |

### 2. マップ要素
マップ上に配置される目的地と障害物：

| 要素 | 説明 | 絵文字 |
|------|------|--------|
| 駅 | 電車の出発地点・目的地 | 🚉 |
| くだもの屋さん | 目的地の一つ | 🍎 |
| 踏切 | 目的地・通過ポイント | 🚧 |
| 消防署 | 目的地の一つ | 🚒 |
| 警察署 | 目的地の一つ | 🚓 |
| 公園 | 目的地の一つ | 🌳 |

### 3. ゲームフロー

```
スタート画面
    ↓
マップ表示 + 目的地の提示
    ↓
プログラム作成（指示ブロックを並べる）
    ↓
実行ボタンを押す
    ↓
電車がアニメーションで動く
    ↓
6a. 目的地到達 → お祝いアニメーション → 次のステージ
6b. 失敗 → もう一度チャレンジ
```

## UI/UX仕様

### プログラム欄
- **位置**: 画面下部
- **サイズ**: 大きく（3歳児がタップしやすい）
- **機能**:
  - 指示ブロックをドラッグ&ドロップ
  - または連続タップで追加
  - ブロックの削除ボタン
  - クリア（全削除）ボタン

### 実行ボタン
- **サイズ**: 特大（指1本で確実に押せる）
- **色**: 鮮やかな緑色
- **ラベル**: 「スタート！」または「GO!」
- **位置**: プログラム欄の横、目立つ位置

### マップビュー
- **スタイル**: 2Dグリッド（上から見た視点）
- **グリッドサイズ**: 5x5 または 6x6
- **マス目**: はっきりと見える線
- **電車**: 3Dモデル（Tsubasaさんの得意分野）

## アニメーション仕様

### 電車の動き
- **移動速度**: ゆっくり（子供が追える速度）
- **移動**: 滑らかに1マスずつ
- **回転**: スムーズに90度回転
- **クラクション**: 電車が揺れる + 音
- **ライト**: ライトが光る + 効果音

### お祝いアニメーション
目的地到達時：
- 🎉 紙吹雪エフェクト
- ✨ キラキラエフェクト
- 🎵 成功音（楽しい音楽）
- 「やったね！」などのメッセージ
- 次のステージへのボタン

## サウンド仕様

### 効果音
- **クラクション**: リアルな電車の警笛音
- **ライト**: 「ピカッ」という軽快な音
- **移動音**: レールの音（オプション）
- **成功音**: 明るいファンファーレ
- **失敗音**: 優しい「あれれ？」音

### 音量設定
- デフォルト: 中音量
- 保護者が調整可能

## 技術スタック

### フロントエンド
- **フレームワーク**: React
- **3Dライブラリ**: Three.js
- **スタイリング**: Tailwind CSS
- **アニメーション**: React Spring / Framer Motion

### 電車モデル
- Three.jsで3D新幹線モデル
- Tsubasaさんの既存ノウハウを活用
- モバイルで快適に動く軽量モデル

### 状態管理
- React hooks (useState, useReducer)
- コマンドキューの管理

## レベル設計

### レベル1: チュートリアル
- **目的地**: すぐ前の駅（1マス）
- **必要コマンド**: 「すすむ」のみ
- **学習**: 基本操作

### レベル2: 曲がる練習
- **目的地**: 左前方のくだもの屋さん
- **必要コマンド**: 「すすむ」「ひだり回転」
- **学習**: 回転の概念

### レベル3: 複数ステップ
- **目的地**: 遠くの公園（3〜4マス）
- **必要コマンド**: 複数の「すすむ」と回転
- **学習**: 順序立てた思考

### レベル4〜: 徐々に複雑化
- 障害物の回避
- 複数の曲がり角
- クラクションやライトを使うミッション

## モバイル対応

### レスポンシブデザイン
- **縦画面**: マップ上部、コマンド下部
- **横画面**: マップ左、コマンド右
- **タッチ最適化**: 最小タップ領域 44x44px以上

### パフォーマンス
- 3Dモデルは軽量化
- アニメーションは60fps維持
- ローディング時間は最小限

## 拡張機能（将来的に）

### ステージエディター
- 保護者が独自のマップを作成
- 難易度調整

### マルチ電車
- 複数の電車を同時にプログラム

### 録画・共有
- 成功したプログラムを動画で保存
- 家族と共有

## 開発優先順位

### Phase 1（MVP）
1. 基本的なマップとグリッド
2. 簡単な電車モデル（3D）
3. 3つの基本コマンド（すすむ、左回転、右回転）
4. 1つの目的地
5. 簡単な成功アニメーション

### Phase 2
1. 全5コマンドの実装
2. 6種類の目的地
3. サウンドエフェクト
4. 複数レベル（5レベル）

### Phase 3
1. 豪華なお祝いアニメーション
2. レベルエディター
3. 実績・報酬システム

## デザインガイドライン

### カラーパレット
- **プライマリ**: 明るい青（空・電車）
- **アクセント**: 黄色・オレンジ（楽しさ）
- **背景**: 明るい緑（草原・マップ）
- **UI**: 大きく柔らかい角丸

### フォント
- **日本語**: 丸ゴシック体
- **サイズ**: 大きめ（読みやすさ優先）

### アイコン
- シンプルで認識しやすい
- カラフルで子供が好む色使い

## アクセシビリティ

- 色覚多様性に配慮（色だけで判断しない）
- タップ領域は大きく
- フィードバックは視覚・聴覚両方
- エラー時も優しいメッセージ

## 成功指標

- 子供が自分で操作できる
- 繰り返し遊びたくなる
- プログラミング的思考の基礎を学べる
- 保護者が安心して使わせられる

---

**作成日**: 2026年2月8日  
**バージョン**: 1.0  
**作成者**: Tsubasa

